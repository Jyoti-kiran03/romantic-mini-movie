document.addEventListener("DOMContentLoaded", () => {

  const startBtn = document.getElementById("startBtn");
  const main = document.getElementById("main");
  const intro = document.getElementById("intro");
  const bgm = document.getElementById("bgm");
  const heartMusic = document.getElementById("heartMusic");
  const yesBtn = document.getElementById("yesBtn");
  const noBtn = document.getElementById("noBtn");
  const surprise = document.getElementById("surprise");

  // START BUTTON
  startBtn.addEventListener("click", () => {
    intro.style.display = "none";
    main.classList.remove("hidden");
    bgm.play();
    typeWriter();
    showSlides();
  });

  // TYPEWRITER
  const text = "Mummy & Papa, your love is the reason I believe in forever ‚ù§Ô∏è";
  let i = 0;
  function typeWriter() {
    if (i < text.length) {
      document.getElementById("typewriter").innerHTML += text.charAt(i);
      i++;
      setTimeout(typeWriter, 70);
    }
  }

  // SLIDESHOW
  let slideIndex = 0;
  function showSlides() {
    const slides = document.getElementsByClassName("slides");
    for (let s of slides) s.style.display = "none";
    slideIndex++;
    if (slideIndex > slides.length) slideIndex = 1;
    slides[slideIndex - 1].style.display = "block";
    setTimeout(showSlides, 2500);
  }

  // SHOW SURPRISE (YES / NO buttons)
  window.showSurprise = function() {
    surprise.classList.remove("hidden");
  }

  // NO button floating
  noBtn.addEventListener("mouseenter", () => {
    noBtn.style.position = "absolute";
    noBtn.style.left = Math.random() * (window.innerWidth - 120) + "px";
    noBtn.style.top = Math.random() * (window.innerHeight - 120) + "px";
  });
  setTimeout(() => { noBtn.style.display = "none"; }, 4000);

  // YES button click
  yesBtn.addEventListener("click", () => {
    bgm.pause();
    heartMusic.currentTime = 0;
    heartMusic.volume = 0.7;
    heartMusic.play();

    surprise.innerHTML = `
      <h1>My Heart Is Open For You üíê</h1>
      <div class="flower"></div>
      <div class="petals"></div>
    `;

    createFallingHeart();

    setTimeout(() => {
      window.location.href = "message.html";
    }, 6000);
  });

  // FALLING HEART
  function createFallingHeart() {
    const box = document.querySelector(".petals");
    if (!box) return;

    const heart = document.createElement("span");
    heart.innerHTML = "üíñ";
    box.appendChild(heart);
  }

});
    /* FALLING CINEMATIC HEART */
.petals span {
  pointer-events: none;
}

@keyframes cinematicFall {
  from {
    transform: translateY(-60px) scale(0.8);
    opacity: 0;
  }
  to {
    transform: translateY(110vh) scale(1.05);
    opacity: 1;
  }
}

@keyframes glow {
  from { filter: drop-shadow(0 0 8px hotpink); }
  to   { filter: drop-shadow(0 0 20px deeppink); }
}


